import{_ as A}from"./AppLayout.vue_vue_type_script_setup_true_lang-BDv_a608.js";import{d as N}from"./index-BDXRdVD0.js";import{d as j,r as $,c as k,o as R,a as d,b as s,u as e,h as B,w as l,e as o,t as i,f as n,g as p,i as f,F as w,j as F,l as I}from"./app-BROu12nU.js";import{_ as g}from"./index-C_7nduq-.js";import{_ as m,a as _,b as v,c}from"./CardTitle.vue_vue_type_script_setup_true_lang-BKih_dnt.js";import{_ as C}from"./CardDescription.vue_vue_type_script_setup_true_lang-CjX4X73i.js";import{_ as L}from"./index-BE-gfsH9.js";import"./index-BMdsnYYQ.js";import"./VisuallyHidden-Bv5znWlI.js";import"./useForwardExpose-BNyMVrtm.js";import"./useForwardPropsEmits-DkhaOHi9.js";const O={class:"flex flex-col gap-6 p-6"},S={class:"text-3xl font-bold"},E={class:"grid gap-4 md:grid-cols-4"},Y={class:"text-2xl font-bold"},h={class:"text-2xl font-bold text-blue-600"},q={class:"text-2xl font-bold text-yellow-600"},H={class:"text-2xl font-bold text-green-600"},M={class:"flex items-center justify-between"},Q={key:0,class:"text-center py-8 text-muted-foreground"},W={key:1,class:"text-center py-8"},z={key:2,class:"space-y-4"},G=["onClick"],J={class:"flex-1"},K={class:"flex items-center gap-2 mb-1"},U={class:"font-semibold"},X={class:"text-sm text-muted-foreground"},mt=j({__name:"Dashboard",setup(Z){const T=[{title:"Dashboard",href:N().url}],u=$([]),b=$(!0),D=k(()=>window.$page?.props?.auth?.user),x=k(()=>({total:u.value.length,open:u.value.filter(a=>a.status==="Open").length,inProgress:u.value.filter(a=>a.status==="In Progress").length,resolved:u.value.filter(a=>a.status==="Resolved").length})),y=k(()=>u.value.slice(0,5)),P=async()=>{try{b.value=!0;const a=await I.get("/api/tickets");u.value=Array.isArray(a.data)?a.data:[]}catch(a){console.error("Error fetching tickets:",a),u.value=[]}finally{b.value=!1}},V=a=>({Open:"default","In Progress":"secondary",Resolved:"outline",Closed:"destructive"})[a]||"default";return R(()=>{P()}),(a,t)=>(f(),d(w,null,[s(e(B),{title:"Dashboard"}),s(A,{breadcrumbs:T},{default:l(()=>[o("div",O,[o("div",null,[o("h1",S,"Welcome back, "+i(D.value?.name)+"!",1),t[4]||(t[4]=o("p",{class:"text-muted-foreground"},"Here's an overview of your support tickets",-1))]),o("div",E,[s(e(m),null,{default:l(()=>[s(e(_),{class:"pb-2"},{default:l(()=>[s(e(v),{class:"text-sm font-medium text-muted-foreground"},{default:l(()=>[...t[5]||(t[5]=[n("Total Tickets",-1)])]),_:1})]),_:1}),s(e(c),null,{default:l(()=>[o("div",Y,i(x.value.total),1)]),_:1})]),_:1}),s(e(m),null,{default:l(()=>[s(e(_),{class:"pb-2"},{default:l(()=>[s(e(v),{class:"text-sm font-medium text-muted-foreground"},{default:l(()=>[...t[6]||(t[6]=[n("Open",-1)])]),_:1})]),_:1}),s(e(c),null,{default:l(()=>[o("div",h,i(x.value.open),1)]),_:1})]),_:1}),s(e(m),null,{default:l(()=>[s(e(_),{class:"pb-2"},{default:l(()=>[s(e(v),{class:"text-sm font-medium text-muted-foreground"},{default:l(()=>[...t[7]||(t[7]=[n("In Progress",-1)])]),_:1})]),_:1}),s(e(c),null,{default:l(()=>[o("div",q,i(x.value.inProgress),1)]),_:1})]),_:1}),s(e(m),null,{default:l(()=>[s(e(_),{class:"pb-2"},{default:l(()=>[s(e(v),{class:"text-sm font-medium text-muted-foreground"},{default:l(()=>[...t[8]||(t[8]=[n("Resolved",-1)])]),_:1})]),_:1}),s(e(c),null,{default:l(()=>[o("div",H,i(x.value.resolved),1)]),_:1})]),_:1})]),s(e(m),null,{default:l(()=>[s(e(_),null,{default:l(()=>[o("div",M,[o("div",null,[s(e(v),null,{default:l(()=>[...t[9]||(t[9]=[n("Recent Tickets",-1)])]),_:1}),s(e(C),null,{default:l(()=>[...t[10]||(t[10]=[n("Your most recent support requests",-1)])]),_:1})]),s(e(g),{onClick:t[0]||(t[0]=r=>e(p).visit("/tickets"))},{default:l(()=>[...t[11]||(t[11]=[n("View All",-1)])]),_:1})])]),_:1}),s(e(c),null,{default:l(()=>[b.value?(f(),d("div",Q," Loading tickets... ")):y.value.length===0?(f(),d("div",W,[t[13]||(t[13]=o("p",{class:"text-muted-foreground mb-4"},"No tickets yet",-1)),s(e(g),{onClick:t[1]||(t[1]=r=>e(p).visit("/tickets"))},{default:l(()=>[...t[12]||(t[12]=[n("Create Your First Ticket",-1)])]),_:1})])):(f(),d("div",z,[(f(!0),d(w,null,F(y.value,r=>(f(),d("div",{key:r.id,onClick:tt=>e(p).visit(`/tickets/${r.id}`),class:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent cursor-pointer transition-colors"},[o("div",J,[o("div",K,[o("h4",U,i(r.subject),1),s(e(L),{variant:V(r.status)},{default:l(()=>[n(i(r.status),1)]),_:2},1032,["variant"])]),o("p",X,i(r.priority)+" Priority â€¢ "+i(new Date(r.created_at).toLocaleDateString()),1)])],8,G))),128))]))]),_:1})]),_:1}),s(e(m),null,{default:l(()=>[s(e(_),null,{default:l(()=>[s(e(v),null,{default:l(()=>[...t[14]||(t[14]=[n("Quick Actions",-1)])]),_:1}),s(e(C),null,{default:l(()=>[...t[15]||(t[15]=[n("Common tasks you can perform",-1)])]),_:1})]),_:1}),s(e(c),{class:"flex gap-4"},{default:l(()=>[s(e(g),{onClick:t[2]||(t[2]=r=>e(p).visit("/tickets"))},{default:l(()=>[...t[16]||(t[16]=[n("Create New Ticket",-1)])]),_:1}),s(e(g),{variant:"outline",onClick:t[3]||(t[3]=r=>e(p).visit("/tickets"))},{default:l(()=>[...t[17]||(t[17]=[n("View All Tickets",-1)])]),_:1})]),_:1})]),_:1})])]),_:1})],64))}});export{mt as default};
